<div class="card border-round overflow-hidden shadow-2">
  <p-dataView #dv [value]="accommodations" [layout]="'list'">
    <ng-template pTemplate="list" let-accommodations>
      <div class="flex flex-column">
        @for (
          accommodation of accommodations;
          let first = $first;
          track accommodation.id
        ) {
          <div
            class="grid grid-nogutter p-4 gap-3"
            [ngClass]="{ 'border-top-1 surface-border': !first }"
          >
            <!-- Accommodation image -->
            <div class="w-12rem h-9rem relative">
              <img
                class="block mx-auto border-round w-full h-full"
                [src]="accommodation.mainPicture"
                [alt]="accommodation.name"
              />
              <p-tag
                [value]="accommodation.distanceToCenterKm + ' Km from center'"
                severity="contrast"
                class="absolute"
                [style.top.px]="5"
                [style.left.px]="4"
              />
            </div>

            <!-- Accommodation info -->
            <div
              class="col-6 flex flex-column md:flex-row justify-content-between md:align-items-center flex-1"
            >
              <div
                class="flex flex-row md:flex-column justify-content-between align-items-start gap-2"
              >
                <div>
                  <span class="font-medium text-secondary text-sm">
                    {{ accommodation.type }}
                  </span>
                  <div class="font-medium text-lg text-900 mt-2">
                    {{ accommodation.name }}
                  </div>
                  <div class="flex flex-wrap gap-2 mt-2">
                    <p-tag
                      *ngFor="let service of accommodation.services"
                      [value]="service"
                      severity="secondary"
                      [rounded]="true"
                      styleClass="text-xs"
                    />
                  </div>
                </div>
                <!-- <smt-rating [rating]="accommodation.reviewsSummary.avgRating" />
                <span class="text-900 font-medium text-sm"
                  >{{ accommodation.reviewsSummary.totalCount }} reviews</span
                > -->
              </div>
            </div>

            <!-- Accommodation price -->
            <div
              class="col-3 flex flex-column justify-content-end md:align-items-end gap-3 pb-2"
            >
              <!-- Price -->
              <div class="flex align-items-center">
                <span class="text-xl font-semibold text-900">
                  {{ accommodation.pricePerNight | currency: "EUR" }}
                </span>
                <span class="ml-2">/ night</span>
              </div>
              <!-- Actions -->
              <div class="flex gap-2">
                <p-button
                  label="Discover"
                  (onClick)="handleSelectAccommodation(accommodation)"
                />
              </div>
            </div>
          </div>
        }
      </div>
    </ng-template>
  </p-dataView>

  <!-- Paginator -->
  <p-paginator
    styleClass="border-noround"
    [first]="currentPage * pageSize"
    [rows]="pageSize"
    [totalRecords]="totalElements"
    [alwaysShow]="false"
    (onPageChange)="handlePageChange($event)"
  />
</div>
